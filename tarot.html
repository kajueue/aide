<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ </text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¡”ç¾…ä¹‹æº</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #f1f5f9 0%, #cbd5e1 100%);
            color: #1e293b;
            overflow-x: hidden;
            margin: 0;
            min-height: 100vh;
        }

        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }

        /* è‡ªå®šç¾©æ²è»¸ */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #e2e8f0; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }

        /* ç‰ŒèƒŒè¨­è¨ˆæ¨£å¼ - ç°è—è‰²èª¿ */
        .card-back-pattern {
            background: repeating-conic-gradient(from 0deg, transparent 0 10deg, rgba(255, 255, 255, 0.05) 10deg 20deg);
        }
    </style>
</head>
<body class="p-4 md:p-6 flex flex-col items-center">

    <header class="text-center mb-10 pt-4">
        <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-slate-600/10 border border-slate-600/20 text-slate-700 text-[10px] font-black tracking-[0.4em] uppercase shadow-sm">
            Celestial Guidance
        </div>
    </header>

    <!-- æ§åˆ¶é¢æ¿ -->
    <section class="bg-white/70 border border-white p-3.5 rounded-3xl w-full max-w-xl mb-12 backdrop-blur-xl shadow-xl flex flex-col md:flex-row gap-4 items-center justify-between ring-1 ring-slate-300/50">
        <div class="flex bg-slate-200/60 p-1 rounded-xl border border-slate-200">
            <button id="btn-spread" onclick="setMode('spread')" class="px-5 py-2 rounded-lg text-[13px] font-bold transition-all duration-300 bg-slate-600 text-white shadow-md">
                å››å…ƒç´ ç‰Œé™£
            </button>
            <button id="btn-free" onclick="setMode('free')" class="px-5 py-2 rounded-lg text-[13px] font-bold transition-all duration-300 text-slate-500 hover:text-slate-800">
                è‡ªç”±æŠ½ç‰Œ
            </button>
        </div>

        <div id="free-count-container" class="hidden flex items-center gap-3 bg-white/40 px-3 py-1.5 rounded-lg border border-slate-200">
            <input type="range" min="1" max="10" value="1" id="free-range" oninput="updateFreeCount(this.value)" class="w-16 h-1 bg-slate-300 rounded-lg appearance-none cursor-pointer accent-slate-600">
            <span id="free-count-display" class="text-slate-600 font-mono text-[11px] font-bold w-8 text-right">1</span>
        </div>

        <!-- é–‹å•Ÿå•Ÿç¤ºæŒ‰éˆ• - èª¿æ•´ç‚ºæ²‰ç©©å¤§åœ°è‰² (Stone/Amber æ·±è‰²èª¿) -->
        <button onclick="shuffleAndDraw()" id="btn-draw" class="w-full md:w-auto px-8 py-2.5 bg-[#78350f] text-white hover:bg-[#451a03] font-black rounded-xl transition-all duration-300 flex items-center justify-center gap-2 uppercase text-[12px] tracking-widest shadow-lg active:scale-95 ring-1 ring-amber-900/20">
            <span id="draw-text">é–‹å•Ÿå•Ÿç¤º</span>
        </button>
    </section>

    <!-- ç‰Œçµ„é¡¯ç¤ºå€åŸŸ -->
    <main id="card-container" class="w-full max-w-6xl flex flex-wrap gap-x-8 gap-y-10 justify-center items-start pb-16 px-4">
        <div class="h-48 flex flex-col items-center justify-center text-slate-500/60">
            <div class="w-px h-16 bg-gradient-to-b from-slate-500/40 via-slate-500/10 to-transparent mb-6"></div>
            <p class="text-[10px] tracking-[0.5em] uppercase font-bold">éœå€™å®‡å®™æŒ‡å¼•</p>
        </div>
    </main>

    <footer class="mt-auto pb-6 text-center text-[10px] text-slate-500 tracking-[0.4em] uppercase font-bold">
        Â© 2026 Cosmic Oracle
    </footer>

    <script>
        // --- æ ¸å¿ƒè³‡æ–™ ---
        const MAJOR_ARCANA = [
            { id: 0, name: "æ„šè€…", path: "ar00", meaning: "é–‹å§‹ã€è‡ªç”±ã€ç´”çœŸã€å†’éšªã€‚" },
            { id: 1, name: "é­”è¡“å¸«", path: "ar01", meaning: "å‰µé€ åŠ›ã€è¡Œå‹•ã€å°ˆæ³¨ã€æŒæ§ã€‚" },
            { id: 2, name: "å¥³ç¥­å¸", path: "ar02", meaning: "ç›´è¦ºã€æ½›æ„è­˜ã€ç¥ç¥•ã€å…§çœã€‚" },
            { id: 3, name: "å¥³çš‡", path: "ar03", meaning: "è±æ”¶ã€æ¯æ€§ã€æ„Ÿå®˜ã€è‡ªç„¶ã€‚" },
            { id: 4, name: "çš‡å¸", path: "ar04", meaning: "æ¬Šå¨ã€çµæ§‹ã€ç©©å®šã€é ˜å°ã€‚" },
            { id: 5, name: "æ•™çš‡", path: "ar05", meaning: "å‚³çµ±ã€ä¿¡ä»°ã€å°å¸«ã€é«”åˆ¶ã€‚" },
            { id: 6, name: "æˆ€äºº", path: "ar06", meaning: "é¸æ“‡ã€ä¼´ä¾¶ã€åˆä¸€ã€åƒ¹å€¼è§€ã€‚" },
            { id: 7, name: "æˆ°è»Š", path: "ar07", meaning: "æ„å¿—åŠ›ã€å‹åˆ©ã€å‰é€²ã€è‡ªå¾‹ã€‚" },
            { id: 8, name: "åŠ›é‡", path: "ar08", meaning: "å‹‡æ°£ã€è€å¿ƒã€å…§åœ¨åŠ›é‡ã€æº«æŸ”ã€‚" },
            { id: 9, name: "éš±å£«", path: "ar09", meaning: "å…§çœã€å­¤ç¨ã€å°‹æ±‚çœŸç›¸ã€æŒ‡å¼•ã€‚" },
            { id: 10, name: "å‘½é‹ä¹‹è¼ª", path: "ar10", meaning: "é€±æœŸã€å‘½é‹ã€é‡å¤§è½‰è®Šã€æ©Ÿæœƒã€‚" },
            { id: 11, name: "æ­£ç¾©", path: "ar11", meaning: "å…¬å¹³ã€çœŸç›¸ã€å› æœã€æ³•å¾‹ã€‚" },
            { id: 12, name: "å€’åŠäºº", path: "ar12", meaning: "çŠ§ç‰²ã€æ–°è§€é»ã€åœæ»¯ã€è¦ºé†’ã€‚" },
            { id: 13, name: "æ­»ç¥", path: "ar13", meaning: "çµæŸã€è½‰åŒ–ã€æ–°ç”Ÿã€å¿…ç¶“ä¹‹è·¯ã€‚" },
            { id: 14, name: "ç¯€åˆ¶", path: "ar14", meaning: "å¹³è¡¡ã€èª¿å’Œã€è€å¿ƒã€èåˆã€‚" },
            { id: 15, name: "æƒ¡é­”", path: "ar15", meaning: "æŸç¸›ã€æ¬²å¿µã€åŸ·è‘—ã€é™°å½±ã€‚" },
            { id: 16, name: "é«˜å¡”", path: "ar16", meaning: "åŠ‡è®Šã€å•Ÿç¤ºã€ç ´å£ã€éœ‡é©šã€‚" },
            { id: 17, name: "æ˜Ÿæ˜Ÿ", path: "ar17", meaning: "å¸Œæœ›ã€éˆæ„Ÿã€å¯§éœã€ç™‚ç™’ã€‚" },
            { id: 18, name: "æœˆäº®", path: "ar18", meaning: "ä¸å®‰ã€å¹»è±¡ã€ç›´è¦ºã€è¿·æƒ˜ã€‚" },
            { id: 19, name: "å¤ªé™½", path: "ar19", meaning: "å¿«æ¨‚ã€æˆåŠŸã€æ´»åŠ›ã€è‡ªä¿¡ã€‚" },
            { id: 20, name: "å¯©åˆ¤", path: "ar20", meaning: "è¦ºé†’ã€è©•ä¼°ã€é‡ç”Ÿã€å‘¼å–šã€‚" },
            { id: 21, name: "ä¸–ç•Œ", path: "ar21", meaning: "åœ“æ»¿ã€å®Œæˆã€æ•´åˆã€æˆåŠŸã€‚" }
        ];

        const SUITS = {
            w: { name: 'æ¬Šæ–', path: 'wa', meanings: { 1: "æ–°é–‹ç«¯ã€è¡Œå‹•åŠ›ã€ç†±æƒ…ã€‚", 2: "è¦åŠƒã€æ±ºç­–ã€é è¦‹ã€‚", 3: "æ“´å¼µã€å‰é€²ã€æ¢ç´¢ã€‚", 4: "ç©©å®šã€æ…¶ç¥ã€å’Œè«§ã€‚", 5: "ç«¶çˆ­ã€è¡çªã€æ··äº‚ã€‚", 6: "å‹åˆ©ã€èªå¯ã€æˆåŠŸã€‚", 7: "é˜²ç¦¦ã€å …æŒã€æŒ‘æˆ°ã€‚", 8: "å¿«é€Ÿã€è¨Šæ¯ã€é€²å±•ã€‚", 9: "è­¦æƒ•ã€éŸŒæ€§ã€æœ€å¾Œè¡åˆºã€‚", 10: "è² æ“”ã€å£“åŠ›ã€æ¥µé™ã€‚", pa: "æ¶ˆæ¯ã€å¥½å¥‡ã€æ–°è¨ˆç•«ã€‚", kn: "è¡å‹ã€å¤§è†½ã€è¡Œå‹•ã€‚", qu: "è‡ªä¿¡ã€ç†±å¿±ã€ç¨ç«‹ã€‚", ki: "é ˜è¢–ã€é è¦‹ã€æŒæ§ã€‚" } },
            c: { name: 'è–æ¯', path: 'cu', meanings: { 1: "æƒ…æ„Ÿã€ç›´è¦ºã€å–œæ‚…ã€‚", 2: "çµåˆã€å¹³ç­‰ã€é—œä¿‚ã€‚", 3: "ç¤¾äº¤ã€å‹èª¼ã€æ…¶ç¥ã€‚", 4: "å€¦æ€ ã€å†·æ¼ ã€æ²‰æ€ã€‚", 5: "å¤±è½ã€æ‚²å‚·ã€éºæ†¾ã€‚", 6: "å›æ†¶ã€ç´”çœŸã€è´ˆèˆ‡ã€‚", 7: "å¹»æƒ³ã€é¸æ“‡ã€è¿·æƒ˜ã€‚", 8: "é›¢å»ã€å°‹æ±‚ã€æ¨æ£„ã€‚", 9: "æ»¿æ„ã€é¡˜æœ›ã€äº«å—ã€‚", 10: "åœ“æ»¿ã€å®¶åº­ã€å¹¸ç¦ã€‚", pa: "æ„Ÿæ€§ã€æ¶ˆæ¯ã€æƒ³åƒã€‚", kn: "æµªæ¼«ã€ç†æƒ³ã€é‚€ç´„ã€‚", qu: "ç›´è¦ºã€æº«æŸ”ã€é—œæ‡·ã€‚", ki: "ç©©å®šã€å¯¬å®¹ã€å¿ƒç†æˆç†Ÿã€‚" } },
            s: { name: 'å¯¶åŠ', path: 'sw', meanings: { 1: "ç†æ™ºã€çªç ´ã€çœŸç›¸ã€‚", 2: "åƒµå±€ã€çŒ¶è±«ã€å¹³è¡¡ã€‚", 3: "å¿ƒç¢ã€ç—›è‹¦ã€èƒŒå›ã€‚", 4: "ä¼‘æ¯ã€å†¥æƒ³ã€å¾©åŸã€‚", 5: "è‡ªç§ã€å¤±æ•—ã€è¡çªã€‚", 6: "éæ¸¡ã€ç™‚ç™’ã€å¹³ç©©ã€‚", 7: "ç­–ç•¥ã€æ¬ºçã€é€ƒé¿ã€‚", 8: "å—å›°ã€å­¤ç«‹ã€é™åˆ¶ã€‚", 9: "ç„¦æ…®ã€å¤±çœ ã€æ†‚é¬±ã€‚", 10: "çµ‚çµã€è°·åº•ã€è§£è„«ã€‚", pa: "è­¦è¦ºã€å­¸ç¿’ã€è§€å¯Ÿã€‚", kn: "æ€¥é€Ÿã€æœæ–·ã€è¡çªã€‚", qu: "ç¨ç«‹ã€å†·éœã€å…¬æ­£ã€‚", ki: "å°ˆæ¥­ã€é‚è¼¯ã€æ¬Šå¨ã€‚" } },
            p: { name: 'äº”èŠ’æ˜Ÿ', path: 'pe', meanings: { 1: "ç¹æ¦®ã€ç‰©è³ªã€å¯¦éš›ã€‚", 2: "å¹³è¡¡ã€é©æ‡‰ã€å¤šè®Šã€‚", 3: "åœ˜éšŠã€æŠ€èƒ½ã€èªå¯ã€‚", 4: "ä¿å®ˆã€æ§åˆ¶ã€ä½”æœ‰ã€‚", 5: "è²§å›°ã€å­¤ç«‹ã€è€ƒé©—ã€‚", 6: "æ…·æ…¨ã€å›å ±ã€è³‡æºã€‚", 7: "æ”¶ç©«ã€è©•ä¼°ã€è€å¿ƒã€‚", 8: "å‹¤å¥®ã€ç²¾é€²ã€å·¥åŒ ã€‚", 9: "ç¨ç«‹ã€è±è¶³ã€é«˜é›…ã€‚", 10: "å‚³æ‰¿ã€å®¶æ—ã€ç©©å›ºã€‚", pa: "å‹™å¯¦ã€å‹¤å­¸ã€æ©Ÿæœƒã€‚", kn: "å¯é ã€è€åŠ›ã€ä¿å®ˆã€‚", qu: "å­•è‚²ã€å¯¦å‹™ã€æ…·æ…¨ã€‚", ki: "æˆåŠŸã€è±ç››ã€ç®¡ç†ã€‚" } }
        };

        const ALL_CARDS = [];
        ALL_CARDS.push(...MAJOR_ARCANA);
        ['w', 'c', 's', 'p'].forEach(sKey => {
            const suit = SUITS[sKey];
            Object.keys(suit.meanings).forEach(key => {
                let cardName, pathId;
                if (isNaN(key)) {
                    const courtMap = { pa: "ä¾è€…", kn: "é¨å£«", qu: "çš‡å", ki: "åœ‹ç‹" };
                    cardName = `${suit.name}${courtMap[key]}`;
                    pathId = `${suit.path}${key}`;
                } else {
                    const num = parseInt(key);
                    cardName = `${suit.name}${num === 1 ? 'é¦–é ˜' : num}`;
                    pathId = `${suit.path}${num < 10 ? '0' + num : num}`;
                }
                ALL_CARDS.push({ id: `${sKey}${key}`, name: cardName, path: pathId, meaning: suit.meanings[key] });
            });
        });

        let drawMode = 'spread';
        let freeCount = 1;
        let isShuffling = false;

        function setMode(mode) {
            drawMode = mode;
            const btnSpread = document.getElementById('btn-spread');
            const btnFree = document.getElementById('btn-free');
            const freeContainer = document.getElementById('free-count-container');

            if (mode === 'spread') {
                btnSpread.className = "px-5 py-2 rounded-lg text-[13px] font-bold transition-all duration-300 bg-slate-600 text-white shadow-md";
                btnFree.className = "px-5 py-2 rounded-lg text-[13px] font-bold transition-all duration-300 text-slate-500 hover:text-slate-800";
                freeContainer.classList.add('hidden');
            } else {
                btnFree.className = "px-5 py-2 rounded-lg text-[13px] font-bold transition-all duration-300 bg-slate-600 text-white shadow-md";
                btnSpread.className = "px-5 py-2 rounded-lg text-[13px] font-bold transition-all duration-300 text-slate-500 hover:text-slate-800";
                freeContainer.classList.remove('hidden');
            }
        }

        function updateFreeCount(val) {
            freeCount = parseInt(val);
            document.getElementById('free-count-display').innerText = val;
        }

        function shuffleAndDraw() {
            if (isShuffling) return;
            isShuffling = true;
            
            const btnDraw = document.getElementById('btn-draw');
            const drawText = document.getElementById('draw-text');
            const container = document.getElementById('card-container');
            
            drawText.innerText = "å åœä¸­...";
            btnDraw.style.opacity = "0.7";
            container.innerHTML = `<div class="h-48 flex items-center justify-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-slate-600"></div></div>`;

            setTimeout(() => {
                const shuffled = [...ALL_CARDS].sort(() => Math.random() - 0.5);
                const count = drawMode === 'spread' ? 4 : freeCount;
                const labels = ["éå»", "ç¾åœ¨", "æœªä¾†", "å»ºè­°"];
                const drawn = shuffled.slice(0, count);
                
                renderCards(drawn, labels);
                
                isShuffling = false;
                drawText.innerText = "é–‹å•Ÿå•Ÿç¤º";
                btnDraw.style.opacity = "1";
            }, 800);
        }

        function renderCards(drawn, labels) {
            const container = document.getElementById('card-container');
            container.innerHTML = '';

            drawn.forEach((card, index) => {
                const labelText = drawMode === 'spread' ? labels[index] : `NO. ${index + 1}`;
                const cardHtml = `
                    <div class="flex flex-col items-center gap-4 w-48 md:w-52">
                        <!-- æ¨™ç±¤ -->
                        <div class="text-white font-black text-sm tracking-[0.3em] bg-slate-600 px-6 py-2 rounded-full border border-slate-500 shadow-lg uppercase">
                            ${labelText}
                        </div>

                        <!-- å¡ç‰Œ -->
                        <div class="relative w-40 h-64 md:w-44 md:h-68 cursor-pointer perspective-1000 group shrink-0" onclick="flipCard(this)">
                            <div class="card-inner relative w-full h-full transition-transform duration-700 transform-style-3d">
                                <!-- ç‰ŒèƒŒ - çµ±ä¸€ç°è—è‰² -->
                                <div class="absolute inset-0 backface-hidden rounded-2xl border-4 border-slate-400/50 shadow-xl overflow-hidden bg-[#475569]">
                                    <div class="relative w-full h-full flex items-center justify-center p-4">
                                        <div class="relative w-full h-full border-2 border-white/20 rounded-lg flex items-center justify-center overflow-hidden">
                                            <div class="absolute w-full h-full card-back-pattern"></div>
                                            <div class="absolute w-24 h-24 border border-white/10 rounded-full"></div>
                                            <div class="absolute w-20 h-20 border-2 border-white/5 rounded-full flex items-center justify-center">
                                                <div class="w-12 h-12 border border-amber-300/20" style="transform: rotate(45deg)"></div>
                                                <div class="absolute w-12 h-12 border border-amber-300/20" style="transform: rotate(-45deg)"></div>
                                                <div class="w-2 h-2 bg-amber-200/40 rounded-full"></div>
                                            </div>
                                            <div class="absolute top-2 left-2 w-4 h-4 border-t border-l border-white/20"></div>
                                            <div class="absolute top-2 right-2 w-4 h-4 border-t border-r border-white/20"></div>
                                            <div class="absolute bottom-2 left-2 w-4 h-4 border-b border-l border-white/20"></div>
                                            <div class="absolute bottom-2 right-2 w-4 h-4 border-b border-r border-white/20"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- ç‰Œé¢ -->
                                <div class="absolute inset-0 backface-hidden rotate-y-180 rounded-2xl border-2 border-white shadow-xl bg-white overflow-hidden flex flex-col">
                                    <div class="relative flex-grow flex items-center justify-center overflow-hidden p-2 bg-white">
                                        <img src="https://www.sacred-texts.com/tarot/pkt/img/${card.path}.jpg" 
                                             alt="${card.name}" 
                                             class="h-full w-full object-contain"
                                             onerror="this.src='data:image/svg+xml;charset=UTF-8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2224%22 height=%2224%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%23cbd5e1%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22%3E%3Crect x=%223%22 y=%223%22 width=%2218%22 height=%2218%22 rx=%222%22 ry=%222%22%3E%3C/rect%3E%3Ccircle cx=%228.5%22 cy=%228.5%22 r=%221.5%22%3E%3C/circle%3E%3Cpolyline points=%2221 15 16 10 5 21%22%3E%3C/polyline%3E%3C/svg%3E';">
                                    </div>
                                    <div class="py-2.5 bg-slate-50 border-t border-slate-100 flex flex-col items-center">
                                       <span class="text-slate-800 font-black text-[13px] tracking-wider">${card.name}</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- è§£é‡‹ -->
                        <div class="card-meaning transition-all duration-500 ease-out overflow-hidden max-h-0 opacity-0">
                            <div class="bg-slate-600 border border-slate-500 px-5 py-3 rounded-2xl shadow-xl text-center mx-2 backdrop-blur-md">
                               <p class="text-white text-[13px] font-bold tracking-wider leading-relaxed">
                                 ${card.meaning}
                               </p>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += cardHtml;
            });
        }

        function flipCard(el) {
            const inner = el.querySelector('.card-inner');
            const meaning = el.parentElement.querySelector('.card-meaning');
            
            if (!inner.classList.contains('rotate-y-180')) {
                inner.classList.add('rotate-y-180');
                meaning.classList.remove('max-h-0', 'opacity-0');
                meaning.classList.add('max-h-28', 'opacity-100');
            }
        }
    </script>
</body>
</html>